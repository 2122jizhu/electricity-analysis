<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ–°å† ç–«æƒ…ç”µåŠ›å†²å‡»ç€‘å¸ƒåˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body { margin: 0; padding: 20px; background: #0f172a; color: #e2e8f0; font-family: 'Segoe UI', system-ui, sans-serif; }
        .container { max-width: 1000px; margin: 0 auto; }
        .title { text-align: center; margin-bottom: 30px; }
        h1 { color: #60a5fa; margin-bottom: 10px; }
        .subtitle { color: #94a3b8; }
        .chart-wrapper { background: #1e293b; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .impact-summary { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .impact-card { background: #334155; padding: 20px; border-radius: 10px; text-align: center; }
        .impact-value { font-size: 28px; font-weight: bold; margin: 10px 0; }
        .impact-label { color: #cbd5e1; font-size: 14px; }
        .highlight { color: #f87171; }
        .insight { background: rgba(96, 165, 250, 0.1); border-left: 4px solid #60a5fa; padding: 15px; margin-bottom: 20px; border-radius: 0 8px 8px 0; }
    </style>
</head>
<body>
<div class="container">
    <div class="title">
        <h1>ğŸ“‰ æ–°å† ç–«æƒ…å¯¹ç”µåŠ›æ¶ˆè´¹çš„ç´¯ç§¯å†²å‡»åˆ†æ</h1>
        <p class="subtitle">å¤šç±³å°¼åŠ å…±å’Œå›½è‡³å°¼æ—¥åˆ©äºšï¼šTop 10å—å½±å“å›½å®¶çš„ç”µåŠ›æ¶ˆè´¹ä¸‹é™ç€‘å¸ƒå›¾</p>
    </div>

    <div class="insight">
        <strong>ğŸ’¡ æ´å¯Ÿå‘ç°ï¼š</strong> å¤šç±³å°¼åŠ å…±å’Œå›½æ—…æ¸¸ä¸šå®Œå…¨åœæ»å¯¼è‡´ç”µåŠ›æ¶ˆè´¹éª¤é™13.7%ï¼Œå¸Œè…Šã€æ³¢æ–¯å°¼äºšç­‰å—æ¬§å›½å®¶åŒæ ·å—æ—…æ¸¸é™åˆ¶é‡åˆ›ï¼Œè€Œä¼Šæ‹‰å…‹ã€æ²™ç‰¹ç­‰äº§æ²¹å›½åˆ™å› æ²¹ä»·æš´è·Œå’Œå‡äº§åè®®é­å—åŒé‡æ‰“å‡»ã€‚
    </div>

    <div class="impact-summary">
        <div class="impact-card">
            <div class="impact-label">æœ€å¤§å•å›½é™å¹…</div>
            <div class="impact-value highlight">-13.7%</div>
            <div>å¤šç±³å°¼åŠ å…±å’Œå›½</div>
        </div>
        <div class="impact-card">
            <div class="impact-label">å‰10å›½å¹³å‡é™å¹…</div>
            <div class="impact-value highlight">-9.0%</div>
            <div>æ˜¾è‘—é«˜äºå…¨çƒå¹³å‡</div>
        </div>
        <div class="impact-card">
            <div class="impact-label">ç»æµç±»å‹åˆ†å¸ƒ</div>
            <div class="impact-value">6/10</div>
            <div>æ—…æ¸¸æˆ–èµ„æºä¾èµ–å‹</div>
        </div>
    </div>

    <div class="chart-wrapper">
        <div id="waterfallChart" style="width: 100%; height: 500px;"></div>
    </div>
</div>

<script>
    const jsonData = [
        {"Country":"Dominican Republic","GrowthRate":-0.1371821964741013},
        {"Country":"Greece","GrowthRate":-0.10816126320870612},
        {"Country":"Bosnia and Herzegovina","GrowthRate":-0.10687843396283074},
        {"Country":"Iraq","GrowthRate":-0.10673585933605856},
        {"Country":"Tunisia","GrowthRate":-0.08894893157618643},
        {"Country":"Peru","GrowthRate":-0.0750694663727155},
        {"Country":"Turkmenistan","GrowthRate":-0.0709284228083016},
        {"Country":"South Africa","GrowthRate":-0.07077504905234759},
        {"Country":"Saudi Arabia","GrowthRate":-0.07006322395292494},
        {"Country":"Nigeria","GrowthRate":-0.06789141507224457}
    ];

    // ç€‘å¸ƒå›¾æ•°æ®å‡†å¤‡
    const countries = jsonData.map(item => item.Country);
    const values = jsonData.map(item => item.GrowthRate * 100);

    // è®¡ç®—ç´¯ç§¯å€¼ç”¨äºç€‘å¸ƒå›¾
    const waterfallData = [];
    let cumulative = 0;

    // èµ·å§‹ç‚¹
    waterfallData.push({
        name: 'èµ·å§‹',
        value: 0,
        itemStyle: { color: 'transparent' }
    });

    // æ¯ä¸ªå›½å®¶çš„ä¸‹é™å€¼
    values.forEach((value, index) => {
        waterfallData.push({
            name: countries[index],
            value: value,
            itemStyle: {
                color: value < -10 ? '#ef4444' :
                    value < -8 ? '#f97316' :
                        value < -6 ? '#f59e0b' : '#eab308'
            }
        });
        cumulative += value;
    });

    // ç»ˆç‚¹ï¼ˆæ€»ä¸‹é™ï¼‰
    waterfallData.push({
        name: 'ç´¯è®¡å½±å“',
        value: cumulative,
        itemStyle: { color: '#dc2626' }
    });

    const chart = echarts.init(document.getElementById('waterfallChart'));
    const option = {
        title: {
            text: 'ç”µåŠ›æ¶ˆè´¹ä¸‹é™ç€‘å¸ƒå›¾',
            subtext: 'å„å›½2020å¹´ç”µåŠ›æ¶ˆè´¹åŒæ¯”ä¸‹é™ç™¾åˆ†æ¯”',
            left: 'center',
            textStyle: { color: '#e2e8f0' }
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: { type: 'shadow' },
            formatter: function(params) {
                if (params[0].dataIndex === 0) {
                    return 'èµ·å§‹åŸºå‡†ç‚¹ (0%)';
                }
                if (params[0].dataIndex === waterfallData.length - 1) {
                    return `ç´¯è®¡æ€»ä¸‹é™: ${cumulative.toFixed(1)}%`;
                }
                const data = waterfallData[params[0].dataIndex];
                return `${data.name}: ${data.value.toFixed(1)}%`;
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: waterfallData.map(item => item.name),
            axisLabel: {
                rotate: 45,
                color: '#94a3b8'
            }
        },
        yAxis: {
            type: 'value',
            name: 'ç”µåŠ›æ¶ˆè´¹å˜åŒ– (%)',
            axisLabel: {
                formatter: '{value}%',
                color: '#94a3b8'
            },
            splitLine: {
                lineStyle: {
                    color: '#334155'
                }
            }
        },
        series: [
            {
                name: 'ä¸‹é™å¹…åº¦',
                type: 'bar',
                data: waterfallData,
                label: {
                    show: true,
                    position: 'top',
                    formatter: function(params) {
                        if (params.dataIndex === 0) return '';
                        if (params.dataIndex === waterfallData.length - 1) {
                            return `æ€»è®¡: ${params.value.toFixed(1)}%`;
                        }
                        return params.value.toFixed(1) + '%';
                    },
                    color: '#e2e8f0'
                },
                itemStyle: {
                    borderColor: '#1e293b',
                    borderWidth: 1
                },
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    chart.setOption(option);

    window.addEventListener('resize', function() {
        chart.resize();
    });
</script>
</body>
</html>
